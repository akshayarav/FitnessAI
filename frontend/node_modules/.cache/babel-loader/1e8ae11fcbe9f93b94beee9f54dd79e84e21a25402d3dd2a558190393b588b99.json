{"ast":null,"code":"var _jsxFileName = \"/Users/akshay/Documents/Projects/FitnessAI/frontend/src/components/Selections/menus/GenerateMenu/GenerateMenu.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from 'react';\nimport { AiOutlineReload } from 'react-icons/ai';\nimport { v4 as uuid } from 'uuid';\nimport $ from \"jquery\";\nimport { OutputContext } from '../../../../context/OutputContext';\nimport axios from 'axios';\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport './generate.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst baseURL = process.env.REACT_APP_URL;\nconst GenerateMenu = () => {\n  _s();\n  const {\n    setOutput\n  } = useContext(OutputContext); // get setOutput from OutputContext\n  const [isLoading, setIsLoading] = useState(false);\n  function handlePost() {\n    setIsLoading(true);\n    const id = uuid();\n    axios.post(baseURL, {\n      age: $(\"#age\").val(),\n      gender: $(\"#gender\").val(),\n      height: $(\"#height\").val(),\n      weight: $(\"#weight\").val(),\n      days_per_week: $(\"#days_per_week :selected\").text(),\n      experience: $(\"#experience :selected\").text(),\n      goal: $(\"#goal\").val(),\n      id: id\n    }).then(function (response) {\n      console.log(response);\n      return fetchOutputs(id);\n    }).then(function (output) {\n      console.log(output);\n      setOutput(output);\n      setIsLoading(false);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n  async function fetchOutputs(id) {\n    // Take id as a parameter\n    let outputData;\n    while (!outputData) {\n      try {\n        const response = await axios.get(baseURL);\n        // Find the element with the same id\n        for (let item of response.data.data) {\n          let body = JSON.parse(item.body);\n          if (body.plan && body.plan.id === id) {\n            outputData = body;\n            break;\n          }\n        }\n        if (!outputData) {\n          // If not found, wait for a moment before trying again\n          await new Promise(resolve => setTimeout(resolve, 2000));\n        }\n      } catch (error) {\n        console.log(error);\n        // In case of error, wait for a moment before trying again\n        await new Promise(resolve => setTimeout(resolve, 2000));\n      }\n    }\n    console.log(outputData.plan.id);\n    return outputData; // Return the data\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"generate\",\n    children: isLoading ?\n    /*#__PURE__*/\n    // This is the loading animation that displays when isLoading is true.\n    // It uses a div with CSS styles to cover the whole page.\n    _jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        // optional, for a darker background\n        zIndex: 9999 // optional, to ensure it's on top of everything else\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success\",\n        onClick: handlePost,\n        disabled: isLoading,\n        id: \"Generate\",\n        children: [\"Generate \", /*#__PURE__*/_jsxDEV(AiOutlineReload, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(ClipLoader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: handlePost,\n      disabled: isLoading,\n      id: \"Generate\",\n      children: [\"Generate \", /*#__PURE__*/_jsxDEV(AiOutlineReload, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 20\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 7\n  }, this);\n};\n_s(GenerateMenu, \"0uMRupUYTpgCSdeFMfMiX9U7h6Y=\");\n_c = GenerateMenu;\nexport default GenerateMenu;\nvar _c;\n$RefreshReg$(_c, \"GenerateMenu\");","map":{"version":3,"names":["React","useState","useContext","AiOutlineReload","v4","uuid","$","OutputContext","axios","ClipLoader","jsxDEV","_jsxDEV","baseURL","process","env","REACT_APP_URL","GenerateMenu","_s","setOutput","isLoading","setIsLoading","handlePost","id","post","age","val","gender","height","weight","days_per_week","text","experience","goal","then","response","console","log","fetchOutputs","output","catch","error","outputData","get","item","data","body","JSON","parse","plan","Promise","resolve","setTimeout","className","children","style","position","top","left","width","display","justifyContent","alignItems","backgroundColor","zIndex","type","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/akshay/Documents/Projects/FitnessAI/frontend/src/components/Selections/menus/GenerateMenu/GenerateMenu.js"],"sourcesContent":["import React, {useState, useContext} from 'react';\nimport {AiOutlineReload} from 'react-icons/ai';\nimport { v4 as uuid } from 'uuid';\nimport $ from \"jquery\";\nimport { OutputContext } from '../../../../context/OutputContext';\nimport axios from 'axios'\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport './generate.css'\n\n\nconst baseURL = process.env.REACT_APP_URL\n\nconst GenerateMenu =() => {\n    const { setOutput } = useContext(OutputContext);  // get setOutput from OutputContext\n    const [isLoading, setIsLoading] = useState(false);\n\n      function handlePost() {\n        setIsLoading(true)\n        const id = uuid()\n        axios.post(baseURL, {\n          age: $(\"#age\").val(),\n          gender: $(\"#gender\").val(),\n          height: $(\"#height\").val(),\n          weight: $(\"#weight\").val(),\n          days_per_week: $(\"#days_per_week :selected\").text(),\n          experience: $(\"#experience :selected\").text(),\n          goal: $(\"#goal\").val(),\n          id: id\n        })\n        .then(function (response) {\n          console.log(response);\n          return fetchOutputs(id);  \n        })\n        .then(function(output) {\n            console.log(output);\n            setOutput(output)\n            setIsLoading(false)\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n\n    async function fetchOutputs (id) {  // Take id as a parameter\n        let outputData;\n        while (!outputData) {\n          try {\n            const response = await axios.get(baseURL);\n            // Find the element with the same id\n            for (let item of response.data.data) {\n              let body = JSON.parse(item.body);\n              if (body.plan && body.plan.id === id) {\n                outputData = body;\n                break;\n              }\n            }\n            if (!outputData) {\n              // If not found, wait for a moment before trying again\n              await new Promise(resolve => setTimeout(resolve, 2000));\n            }\n          } catch (error) {\n            console.log(error);\n            // In case of error, wait for a moment before trying again\n            await new Promise(resolve => setTimeout(resolve, 2000));\n          }\n        }\n        console.log(outputData.plan.id);\n        return outputData;  // Return the data\n      }\n\n    return (\n      <div className = \"generate\">\n      {isLoading ? (\n                // This is the loading animation that displays when isLoading is true.\n        // It uses a div with CSS styles to cover the whole page.\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '100vw',\n          height: '100vh',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',  // optional, for a darker background\n          zIndex: 9999,  // optional, to ensure it's on top of everything else\n        }}>\n                  <button type=\"button\" className=\"btn btn-success\" onClick={handlePost} disabled = {isLoading} id=\"Generate\">\n          Generate <AiOutlineReload />\n        </button>\n          <ClipLoader />\n        </div>\n      ) : (\n        <button type=\"button\" className=\"btn btn-success\" onClick={handlePost} disabled = {isLoading} id=\"Generate\">\n          Generate <AiOutlineReload />\n        </button>\n      )}\n    </div>\n    )\n}\n\nexport default GenerateMenu"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}