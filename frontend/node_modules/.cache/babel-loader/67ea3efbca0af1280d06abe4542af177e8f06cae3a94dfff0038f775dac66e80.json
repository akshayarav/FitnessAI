{"ast":null,"code":"var _s = $RefreshSig$();\nimport { v4 as uuid } from 'uuid';\nimport React, { useState, useContext } from 'react';\nimport axios from 'axios';\nimport $ from \"jquery\";\nimport { OutputContext } from '../context/OutputContext';\nconst baseURL = process.env.REACT_APP_URL;\nexport default async function HandlePost() {\n  _s();\n  const {\n    output,\n    setOutput\n  } = useContext(OutputContext);\n  const id = uuid();\n  axios.post(baseURL, {\n    age: $(\"#age\").val(),\n    gender: $(\"#gender\").val(),\n    height: $(\"#height\").val(),\n    weight: $(\"#weight\").val(),\n    days_per_week: $(\"#days_per_week :selected\").text(),\n    experience: $(\"#experience :selected\").text(),\n    goal: $(\"#goal\").val(),\n    id: id\n  }).then(function (response) {\n    console.log(response);\n    return fetchOutputs(id);\n  }).then(function (output) {\n    console.log(output);\n  }).catch(function (error) {\n    console.log(error);\n  });\n  await new Promise(resolve => setTimeout(resolve, 2000));\n}\n_s(HandlePost, \"DnmLB8Cs7jy+Rg4j+TzisB5qTzA=\");\n_c = HandlePost;\nasync function fetchOutputs(id) {\n  // Take id as a parameter\n  let outputData;\n  while (!outputData) {\n    try {\n      const response = await axios.get(baseURL);\n      // Find the element with the same id\n      for (let item of response.data.data) {\n        let body = JSON.parse(item.body);\n        if (body.plan && body.plan.id === id) {\n          outputData = body;\n          break;\n        }\n      }\n      if (!outputData) {\n        // If not found, wait for a moment before trying again\n        await new Promise(resolve => setTimeout(resolve, 2000));\n      }\n    } catch (error) {\n      console.log(error);\n      // In case of error, wait for a moment before trying again\n      await new Promise(resolve => setTimeout(resolve, 2000));\n    }\n  }\n  console.log(outputData.plan.id);\n  return outputData; // Return the data\n}\nvar _c;\n$RefreshReg$(_c, \"HandlePost\");","map":{"version":3,"names":["v4","uuid","React","useState","useContext","axios","$","OutputContext","baseURL","process","env","REACT_APP_URL","HandlePost","_s","output","setOutput","id","post","age","val","gender","height","weight","days_per_week","text","experience","goal","then","response","console","log","fetchOutputs","catch","error","Promise","resolve","setTimeout","_c","outputData","get","item","data","body","JSON","parse","plan","$RefreshReg$"],"sources":["/Users/akshay/Documents/Projects/FitnessAI/frontend/src/services/fitnessai.js"],"sourcesContent":["import { v4 as uuid } from 'uuid';\nimport React, {useState, useContext} from 'react';\nimport axios from 'axios';\nimport $ from \"jquery\";\nimport { OutputContext } from '../context/OutputContext';\n \nconst baseURL = process.env.REACT_APP_URL\n\nexport default async function HandlePost() {\n    const { output, setOutput } = useContext(OutputContext);\n    const id = uuid()\n    axios.post(baseURL, {\n      age: $(\"#age\").val(),\n      gender: $(\"#gender\").val(),\n      height: $(\"#height\").val(),\n      weight: $(\"#weight\").val(),\n      days_per_week: $(\"#days_per_week :selected\").text(),\n      experience: $(\"#experience :selected\").text(),\n      goal: $(\"#goal\").val(),\n      id: id\n    })\n    .then(function (response) {\n      console.log(response);\n      return fetchOutputs(id);  \n    })\n    .then(function(output) {\n        console.log(output);\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n    await new Promise(resolve => setTimeout(resolve, 2000));\n}\n\nasync function fetchOutputs (id) {  // Take id as a parameter\n    let outputData;\n    while (!outputData) {\n      try {\n        const response = await axios.get(baseURL);\n        // Find the element with the same id\n        for (let item of response.data.data) {\n          let body = JSON.parse(item.body);\n          if (body.plan && body.plan.id === id) {\n            outputData = body;\n            break;\n          }\n        }\n        if (!outputData) {\n          // If not found, wait for a moment before trying again\n          await new Promise(resolve => setTimeout(resolve, 2000));\n        }\n      } catch (error) {\n        console.log(error);\n        // In case of error, wait for a moment before trying again\n        await new Promise(resolve => setTimeout(resolve, 2000));\n      }\n    }\n    console.log(outputData.plan.id);\n    return outputData;  // Return the data\n  }\n  \n\n  "],"mappings":";AAAA,SAASA,EAAE,IAAIC,IAAI,QAAQ,MAAM;AACjC,OAAOC,KAAK,IAAGC,QAAQ,EAAEC,UAAU,QAAO,OAAO;AACjD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,CAAC,MAAM,QAAQ;AACtB,SAASC,aAAa,QAAQ,0BAA0B;AAExD,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,aAAa;AAEzC,eAAe,eAAeC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACvC,MAAM;IAAEC,MAAM;IAAEC;EAAU,CAAC,GAAGX,UAAU,CAACG,aAAa,CAAC;EACvD,MAAMS,EAAE,GAAGf,IAAI,CAAC,CAAC;EACjBI,KAAK,CAACY,IAAI,CAACT,OAAO,EAAE;IAClBU,GAAG,EAAEZ,CAAC,CAAC,MAAM,CAAC,CAACa,GAAG,CAAC,CAAC;IACpBC,MAAM,EAAEd,CAAC,CAAC,SAAS,CAAC,CAACa,GAAG,CAAC,CAAC;IAC1BE,MAAM,EAAEf,CAAC,CAAC,SAAS,CAAC,CAACa,GAAG,CAAC,CAAC;IAC1BG,MAAM,EAAEhB,CAAC,CAAC,SAAS,CAAC,CAACa,GAAG,CAAC,CAAC;IAC1BI,aAAa,EAAEjB,CAAC,CAAC,0BAA0B,CAAC,CAACkB,IAAI,CAAC,CAAC;IACnDC,UAAU,EAAEnB,CAAC,CAAC,uBAAuB,CAAC,CAACkB,IAAI,CAAC,CAAC;IAC7CE,IAAI,EAAEpB,CAAC,CAAC,OAAO,CAAC,CAACa,GAAG,CAAC,CAAC;IACtBH,EAAE,EAAEA;EACN,CAAC,CAAC,CACDW,IAAI,CAAC,UAAUC,QAAQ,EAAE;IACxBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACrB,OAAOG,YAAY,CAACf,EAAE,CAAC;EACzB,CAAC,CAAC,CACDW,IAAI,CAAC,UAASb,MAAM,EAAE;IACnBe,OAAO,CAACC,GAAG,CAAChB,MAAM,CAAC;EACvB,CAAC,CAAC,CACDkB,KAAK,CAAC,UAAUC,KAAK,EAAE;IACtBJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC;EACpB,CAAC,CAAC;EACF,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;AAC3D;AAACtB,EAAA,CAxB6BD,UAAU;AAAAyB,EAAA,GAAVzB,UAAU;AA0BxC,eAAemB,YAAYA,CAAEf,EAAE,EAAE;EAAG;EAChC,IAAIsB,UAAU;EACd,OAAO,CAACA,UAAU,EAAE;IAClB,IAAI;MACF,MAAMV,QAAQ,GAAG,MAAMvB,KAAK,CAACkC,GAAG,CAAC/B,OAAO,CAAC;MACzC;MACA,KAAK,IAAIgC,IAAI,IAAIZ,QAAQ,CAACa,IAAI,CAACA,IAAI,EAAE;QACnC,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAACE,IAAI,CAAC;QAChC,IAAIA,IAAI,CAACG,IAAI,IAAIH,IAAI,CAACG,IAAI,CAAC7B,EAAE,KAAKA,EAAE,EAAE;UACpCsB,UAAU,GAAGI,IAAI;UACjB;QACF;MACF;MACA,IAAI,CAACJ,UAAU,EAAE;QACf;QACA,MAAM,IAAIJ,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;MACzD;IACF,CAAC,CAAC,OAAOF,KAAK,EAAE;MACdJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC;MAClB;MACA,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC,CAAC;IACzD;EACF;EACAN,OAAO,CAACC,GAAG,CAACQ,UAAU,CAACO,IAAI,CAAC7B,EAAE,CAAC;EAC/B,OAAOsB,UAAU,CAAC,CAAE;AACtB;AAAC,IAAAD,EAAA;AAAAS,YAAA,CAAAT,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}